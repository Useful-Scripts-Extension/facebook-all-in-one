import{aj as v,r as o,ao as u}from"./index-C1pekiB7.js";import{u as I,a as E}from"./index-0WeH8Kh1.js";function L({disabled:s,children:R,next:r,hasNext:a,prev:c,hasPrev:h,loader:l,endMessage:g,prevLoader:k,prevEndMessage:p}){const{message:t}=v.useApp(),{isIntersecting:F,ref:d}=I(),{isIntersecting:m,ref:j}=I();E(()=>{x(),y()},1e3),o.useLayoutEffect(()=>{x()},[m]),o.useLayoutEffect(()=>{y()},[F]);const f=o.useRef(!1),x=()=>{if(!s&&m&&!f.current){f.current=!0;const e="checkFetchNext";t.loading({key:e,content:"Fetching next...",duration:0}),r==null||r().then(()=>{t.success({key:e,content:"Fetch success"})}).catch(n=>{t.error({key:e,content:"Fetch failed: "+n.message}),console.log(n)}).finally(()=>{f.current=!1})}},i=o.useRef(!1),y=()=>{if(!s&&F&&!i.current){i.current=!0;const e="checkFetchPrev";t.loading({key:e,content:"Fetching prev...",duration:0}),c==null||c().then(()=>{t.success({key:e,content:"Fetch success"})}).catch(n=>{t.error({key:e,content:"Fetch failed: "+n.message}),console.log(n)}).finally(()=>{i.current=!1})}};return u.jsxs("div",{style:{flex:1},children:[c&&h&&!s&&u.jsx("div",{ref:d,children:k||l}),c&&!h&&(p||g),R,r&&a&&!s&&u.jsx("div",{ref:j,children:l}),!a&&g]})}export{L as default};
