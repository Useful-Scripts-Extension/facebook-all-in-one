const __vite__fileDeps=["./ImageLazyPreview-DikWkNSS.js","./index-C6IDuEAZ.js","./index-DjlRUb8J.css","./MyApp-nuvdhu8g.js","./index-BZ0u2WdZ.js","./addEventListener-DGLXt8vE.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{r as d,an as P,ar as A}from"./index-C6IDuEAZ.js";import{C as N}from"./Collection-BU7EqDjn.js";import{x,u as k,K as M}from"./MyApp-nuvdhu8g.js";import{L as F}from"./index-JKgrcFJ4.js";import"./index-grKA1H2q.js";import"./file-download-IvOSaqja.js";import"./sweetalert2.all-BmLNahrN.js";import"./VIP-WmW1iHuR.js";import"./feeds-CWLixFh1.js";import"./index-UFxH4aKA.js";import"./Dropdown-D8umh5xP.js";import"./PurePanel-BMdJEOeI.js";import"./index-DtfJHz0w.js";import"./index-CtFRJH9c.js";import"./index-0YeK3THP.js";import"./TextArea--VwofgTr.js";import"./addEventListener-DGLXt8vE.js";import"./index-CxNAxsgI.js";import"./index-D7I8Gysl.js";import"./Pagination-D7beidf8.js";import"./useBreakpoint-B7PfgbsS.js";import"./responsiveObserver-qTidF-LX.js";import"./row-DmEaGPGB.js";async function G({id:r,count:l=8,cursor:m=""}){var p,c;const n=await x({doc_id:"4820192058049838",fb_api_caller_class:"RelayModern",fb_api_req_friendly_name:"ProfileCometAppCollectionPhotosRendererPaginationQuery",variables:{count:l,cursor:m,scale:1,id:btoa(`app_collection:${r}:2305272732:5`)}}),o=JSON.parse(n),{edges:t=[],page_info:s}=((c=(p=o==null?void 0:o.data)==null?void 0:p.node)==null?void 0:c.pageItems)||{};return{photos:t.map(i=>{var a,_,e,u,h,y,b,f,C,v,w,I,E,R,S;return{id:atob((a=i==null?void 0:i.node)==null?void 0:a.id).split(":").pop(),url:(_=i==null?void 0:i.node)==null?void 0:_.url,thumbnail:(u=(e=i==null?void 0:i.node)==null?void 0:e.image)==null?void 0:u.uri,image:(b=(y=(h=i==null?void 0:i.node)==null?void 0:h.node)==null?void 0:y.viewer_image)==null?void 0:b.uri,width:(v=(C=(f=i==null?void 0:i.node)==null?void 0:f.node)==null?void 0:C.viewer_image)==null?void 0:v.width,height:(E=(I=(w=i==null?void 0:i.node)==null?void 0:w.node)==null?void 0:I.viewer_image)==null?void 0:E.height,accessibility_caption:(S=(R=i==null?void 0:i.node)==null?void 0:R.node)==null?void 0:S.accessibility_caption,cursor:i==null?void 0:i.cursor}}),page_info:s}}async function O({id:r,count:l=8,cursor:m=""}){var p,c,i;const n=await x({doc_id:"6022153214500431",fb_api_caller_class:"RelayModern",fb_api_req_friendly_name:"GroupsCometMediaPhotosTabGridQuery",variables:{count:l,cursor:m,scale:1,id:r}}),o=JSON.parse(n),{edges:t=[],page_info:s}=((i=(c=(p=o==null?void 0:o.data)==null?void 0:p.node)==null?void 0:c.group_mediaset)==null?void 0:i.media)||{};return{photos:t.map(a=>{var _,e,u,h,y,b,f,C,v,w,I;return{id:(_=a==null?void 0:a.node)==null?void 0:_.id,url:(e=a==null?void 0:a.node)==null?void 0:e.url,thumbnail:(h=(u=a==null?void 0:a.node)==null?void 0:u.image)==null?void 0:h.uri,image:(b=(y=a==null?void 0:a.node)==null?void 0:y.viewer_image)==null?void 0:b.uri,width:(C=(f=a==null?void 0:a.node)==null?void 0:f.viewer_image)==null?void 0:C.width,height:(w=(v=a==null?void 0:a.node)==null?void 0:v.viewer_image)==null?void 0:w.height,accessibility_caption:(I=a==null?void 0:a.node)==null?void 0:I.accessibility_caption,cursor:a==null?void 0:a.cursor}}),page_info:s}}async function L(r){var o,t,s;const l=await x({fb_api_req_friendly_name:"CometPhotoRootContentQuery",variables:{UFI2CommentsProvider_commentsKey:"CometPhotoRootQuery",feedbackSource:65,feedLocation:"COMET_MEDIA_VIEWER",isMediaset:!1,nodeID:r,privacySelectorRenderLocation:"COMET_MEDIA_VIEWER",renderLocation:"permalink",scale:2,useDefaultActor:!1,useHScroll:!1,focusCommentID:null,displayCommentsContextEnableComment:null,displayCommentsContextIsAdPreview:null,displayCommentsContextIsAggregatedShare:null,displayCommentsContextIsStorySet:null,displayCommentsFeedbackContext:null,__relay_internal__pv__CometUFIReactionEnableShortNamerelayprovider:!0,__relay_internal__pv__CometUFIShareActionMigrationrelayprovider:!1,__relay_internal__pv__CometUFIReactionsEnableShortNamerelayprovider:!1,__relay_internal__pv__CometImmersivePhotoCanUserDisable3DMotionrelayprovider:!1},doc_id:"7830475950340566"}),m=JSON.parse(((o=l==null?void 0:l.split(`
`))==null?void 0:o[0])||"{}"),n=((t=m==null?void 0:m.data)==null?void 0:t.currMedia)||{};return{id:r,url:(s=n.creation_story)==null?void 0:s.url,accessibility_caption:n.accessibility_caption,image:n.image.uri,width:n.image.width,height:n.image.height,thumbnail:n.image.uri}}const T=d.lazy(()=>A(()=>import("./ImageLazyPreview-DikWkNSS.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url));function to({target:r}){k();const l=d.useCallback(async(o=[],t)=>{var c;if(!(r!=null&&r.id)||!(r!=null&&r.type))return;const s=t||((c=o==null?void 0:o[(o==null?void 0:o.length)-1])==null?void 0:c.cursor)||"";return(r.type===M.Group?await O({id:r.id,cursor:s}):await G({id:r.id,cursor:s})).photos},[r]),m=d.useCallback(o=>P.jsx(F.Item,{children:P.jsx(T,{src:o.thumbnail,alt:o.accessibility_caption,width:150,height:150,style:{objectFit:"cover",borderRadius:"10px"},cacheId:"photos."+o.id,getPreview:()=>o.image||L(o.id).then(t=>t.image)})}),[]),n=d.useCallback(async(o,t)=>{if(!o.image&&(r==null?void 0:r.type)===M.Group){const s=await L(o.id);o.image=s.image||s.thumbnail||o.thumbnail}return{url:o.image,name:o.id+".jpg"}},[r==null?void 0:r.id]);return P.jsx(N,{collectionName:(r==null?void 0:r.name)+" - Photos",fetchNext:l,renderItem:m,downloadItem:n,getItemCursor:o=>o.cursor||"",rowKey:o=>o.id})}export{to as default};
