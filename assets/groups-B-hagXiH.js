import{x as d,Y as E,y as M}from"./MyApp-B1qRT6WQ.js";async function J(o=""){var c,l,r,s,e,u;const i=await d({fb_api_req_friendly_name:"CometGroupMembersAdminsRootQuery",variables:{groupID:o,scale:2},doc_id:"8138328892873449"}),a=JSON.parse(i);console.log(a);const t=((c=a==null?void 0:a.data)==null?void 0:c.group)||{};return{groupId:o||"",adminCount:((l=t==null?void 0:t.admin_and_moderator_profiles)==null?void 0:l.count)||0,memberCount:((r=t==null?void 0:t.all_active_members)==null?void 0:r.count)||((s=t==null?void 0:t.group_member_profiles)==null?void 0:s.count)||0,adminProfiles:(u=(e=t==null?void 0:t.group_admin_profiles)==null?void 0:e.edges)==null?void 0:u.map(n=>{var _,p,f,b,m,N;return{uid:(_=n==null?void 0:n.node)==null?void 0:_.id,name:(p=n==null?void 0:n.node)==null?void 0:p.name,avatar:(b=(f=n==null?void 0:n.node)==null?void 0:f.profile_picture)==null?void 0:b.uri,url:(m=n==null?void 0:n.node)==null?void 0:m.url,verified:(N=n==null?void 0:n.node)==null?void 0:N.is_verified}})}}async function O({uid:o="",cursor:i}){const a=await d({fb_api_req_friendly_name:"ProfileCometAppCollectionGridRendererPaginationQuery",variables:{count:8,cursor:i??null,id:btoa(`app_collection:${o||await E()}:2361831622:66`)},doc_id:"5244211935648733"}),t=JSON.parse(a);console.log(t);const{edges:c=[],page_info:l={}}=M(t)||{};return c.map(r=>{var s,e,u,n,_;return{id:((s=r.node.node)==null?void 0:s.id)||atob(r.node.id).split(":").at(-1),name:r.node.title.text,description:(n=(u=(e=r.node.subtitle_text)==null?void 0:e.text)==null?void 0:u.split(`
`))==null?void 0:n[1],url:r.node.url,visibility:r.node.node.visibility,image:r.node.image.uri,membersCount:Number((((_=r.node.subtitle_text.text.split(`
`))==null?void 0:_[0])||"").match(/\d+/g).join("")??1),cursor:r.cursor}})}var y=(o=>(o.NOT_JOINED="NOT_JOINED",o.PENDING="PENDING",o.MEMBER="MEMBER",o.ADMIN="ADMIN",o))(y||{});function v(o,i="MEMBER"){var a,t,c,l,r,s,e,u;return{id:(a=o==null?void 0:o.node)==null?void 0:a.id,name:(t=o==null?void 0:o.node)==null?void 0:t.name,avatar:(l=(c=o==null?void 0:o.node)==null?void 0:c.profile_picture)==null?void 0:l.uri,url:(r=o==null?void 0:o.node)==null?void 0:r.url,lastVisitedTime:(((s=o==null?void 0:o.node)==null?void 0:s.viewer_last_visited_time)||((e=o==null?void 0:o.node)==null?void 0:e.viewer_request_to_join_timestamp)||((u=o==null?void 0:o.node)==null?void 0:u.last_post_time)||0)*1e3,userType:i,cursor:o==null?void 0:o.cursor}}async function w({cursor:o="",ordering:i=["viewer_added"]}={}){var r,s,e,u;if(!o){const n=await d({fb_api_req_friendly_name:"GroupsCometJoinsRootQuery",variables:{ordering:i,scale:2},doc_id:"6985470494844388"}),_=JSON.parse(n),p=[],{pending_groups:f={},all_joined_groups:b={}}=((r=_==null?void 0:_.data)==null?void 0:r.viewer)||{};return(s=f.edges)==null||s.forEach(m=>{p.push(v(m,"PENDING"))}),(u=(e=b.tab_groups_list)==null?void 0:e.edges)==null||u.forEach(m=>{p.push(v(m,"MEMBER"))}),p}const a=await d({fb_api_req_friendly_name:"GroupsCometAllJoinedGroupsSectionPaginationQuery",variables:{cursor:o||null,ordering:i,count:20,scale:2},doc_id:"6009728632468556"}),t=JSON.parse(a);console.log(t);const{edges:c=[],page_info:l={}}=M(t)||{};return c.map(n=>v(n,"MEMBER"))}async function C({cursor:o=""}={}){var l;const i=await d({variables:{adminGroupsCount:1e3,memberGroupsCount:0,scale:1.5},doc_id:"4868264159917793"}),a=JSON.parse(i);console.log(a);const{edges:t=[],page_info:c={}}=M((l=a==null?void 0:a.data)==null?void 0:l.adminGroups)||{};return t.map(r=>v(r,"ADMIN"))}async function D(o=""){var t;const i=await d({fb_api_req_friendly_name:"useGroupLeaveMutation",variables:{input:{group_id:o,readd_policy:"ALLOW_READD",source:"comet_group_page",actor_id:"me"},groupID:o},doc_id:"2018579381571489"}),a=JSON.parse(i);return console.log(a),((t=a==null?void 0:a.data)==null?void 0:t.group_leave)!=null}export{y as U,w as a,J as b,O as c,C as g,D as l};
