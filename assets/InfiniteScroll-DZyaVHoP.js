import{ak as v,r as o,ap as u}from"./index-D-TwGz9N.js";import{u as p,a as E}from"./index-VslQ8qV6.js";function L({disabled:s,children:y,next:r,hasNext:a,prev:c,hasPrev:h,loader:l,endMessage:g,prevLoader:I,prevEndMessage:R}){const{message:t}=v.useApp(),{isIntersecting:F,ref:d}=p(),{isIntersecting:m,ref:j}=p();E(()=>{x(),k()},1e3),o.useLayoutEffect(()=>{x()},[m]),o.useLayoutEffect(()=>{k()},[F]);const f=o.useRef(!1),x=()=>{if(!s&&m&&!f.current){f.current=!0;const e="checkFetchNext";t.loading({key:e,content:"Fetching next...",duration:0}),r==null||r().then(()=>{t.success({key:e,content:"Fetch success"})}).catch(n=>{t.error({key:e,content:"Fetch failed: "+n.message}),console.log(n)}).finally(()=>{f.current=!1})}},i=o.useRef(!1),k=()=>{if(!s&&F&&!i.current){i.current=!0;const e="checkFetchPrev";t.loading({key:e,content:"Fetching prev...",duration:0}),c==null||c().then(()=>{t.success({key:e,content:"Fetch success"})}).catch(n=>{t.error({key:e,content:"Fetch failed: "+n.message}),console.log(n)}).finally(()=>{i.current=!1})}};return u.jsxs("div",{style:{flex:1},children:[c&&h&&!s&&u.jsx("div",{ref:d,children:I||l}),c&&!h&&(R||g),y,r&&a&&!s&&u.jsx("div",{ref:j,children:l}),!a&&g]})}export{L as default};
