import{x as v,z as $}from"./MyApp-Bys9Gcx7.js";async function G({uid:i="",cursor:p=""}){var l,r,c,d,u,b,f,_,h,y;const o=[],m=await v({fb_api_req_friendly_name:"ProfileCometAppCollectionAlbumsRendererPaginationQuery",variables:{cursor:p,count:8,scale:2,id:btoa(`app_collection:${i}:2305272732:6`)},doc_id:"8672545689426653"}),n=JSON.parse(m),{edges:e=[],page_info:s={}}=((r=(l=n==null?void 0:n.data)==null?void 0:l.node)==null?void 0:r.pageItems)||{};for(const t of e){const k=atob((c=t==null?void 0:t.node)==null?void 0:c.id).split(":").pop()||"";o.push({id:k,type:"album",name:(u=(d=t==null?void 0:t.node)==null?void 0:d.title)==null?void 0:u.text,count:parseInt((f=(b=t==null?void 0:t.node)==null?void 0:b.subtitle_text)==null?void 0:f.text)||0,link:(_=t==null?void 0:t.node)==null?void 0:_.url,picture:(y=(h=t==null?void 0:t.node)==null?void 0:h.image)==null?void 0:y.uri,cursor:t==null?void 0:t.cursor,recent:o.length})}return{albums:o,nextCursor:s==null?void 0:s.end_cursor}}async function J({groupId:i="",cursor:p=""}){var l,r,c,d,u,b,f,_,h,y,t,k,x,A;const o=[],m=await v({fb_api_req_friendly_name:"GroupsCometMediaAlbumsTabGridQuery",variables:{cursor:p,count:8,scale:2,id:i},doc_id:"6894403247286675"}),n=JSON.parse(m),{edges:e=[],page_info:s={}}=((r=(l=n==null?void 0:n.data)==null?void 0:l.node)==null?void 0:r.group_albums)||{};for(const a of e){const C=(c=a==null?void 0:a.node)==null?void 0:c.id;o.push({id:C,type:"album",name:(u=(d=a==null?void 0:a.node)==null?void 0:d.title)==null?void 0:u.text,count:(((f=(b=a==null?void 0:a.node)==null?void 0:b.photos)==null?void 0:f.count)||0)+(((h=(_=a==null?void 0:a.node)==null?void 0:_.video)==null?void 0:h.count)||0),link:(y=a==null?void 0:a.node)==null?void 0:y.url,picture:(A=(x=(k=(t=a==null?void 0:a.node)==null?void 0:t.album_cover_focused_image)==null?void 0:k.image)==null?void 0:x.image)==null?void 0:A.uri,cursor:a==null?void 0:a.cursor,recent:o.length})}return{albums:o,nextCursor:s==null?void 0:s.end_cursor}}async function N({id:i="",fromId:p="",accessToken:o=""}){var s,l,r,c,d;const m=[],n=await $(`https://graph.facebook.com/v14.0/${i}?fields=albums.limit(100)${p?`.after(${btoa(p)})`:""}{type,name,count,link,picture{url}}&access_token=${o}`),e=JSON.parse(n);if((l=(s=e.albums)==null?void 0:s.data)!=null&&l.length)for(const u of e.albums.data)m.push({id:u.id,type:u.type,name:u.name,count:u.count,link:u.link,picture:u.picture.data.url,recent:m.length});return{albums:m,nextCursor:(d=(c=(r=e.albums)==null?void 0:r.paging)==null?void 0:c.cursors)==null?void 0:d.after}}var O=(i=>(i.IMAGE="image",i.VIDEO="video",i))(O||{});async function S({albumId:i,accessToken:p="",fromId:o=""}){var s,l;let m=`https://graph.facebook.com/v14.0/${i}/photos?fields=largest_image&limit=100&access_token=${p}`;o&&(m+=`&after=${btoa(o)}`);let n=await $(m),e=JSON.parse(n);if((s=e==null?void 0:e.data)!=null&&s.length)return((l=e==null?void 0:e.data)==null?void 0:l.map(r=>({id:r.id,uri:r.largest_image.source,type:"image"})))||[];n=await v({doc_id:"8142948395762884",variables:{id:i,cursor:o?btoa("fbid:"+o):"",count:14,renderLocation:"permalink",scale:2}}),e=JSON.parse(n);try{return e.data.node.media.edges.map(c=>({id:c.node.id,uri:c.node.image.uri,type:c.node.__typename==="Video"?"video":"image"}))}catch(r){return console.error(r),[]}}export{O as M,J as a,G as b,S as c,N as g};
