import{x as m,Z as E,y as M}from"./MyApp-C3BGDbpk.js";async function J(o=""){var c,l,i,s,e,u;const r=await m({fb_api_req_friendly_name:"CometGroupMembersAdminsRootQuery",variables:{groupID:o,scale:2},doc_id:"8138328892873449"}),a=JSON.parse(r);console.log(a);const t=((c=a==null?void 0:a.data)==null?void 0:c.group)||{};return{groupId:o||"",adminCount:((l=t==null?void 0:t.admin_and_moderator_profiles)==null?void 0:l.count)||0,memberCount:((i=t==null?void 0:t.all_active_members)==null?void 0:i.count)||((s=t==null?void 0:t.group_member_profiles)==null?void 0:s.count)||0,adminProfiles:(u=(e=t==null?void 0:t.group_admin_profiles)==null?void 0:e.edges)==null?void 0:u.map(n=>{var _,p,f,b,d,N;return{uid:(_=n==null?void 0:n.node)==null?void 0:_.id,name:(p=n==null?void 0:n.node)==null?void 0:p.name,avatar:(b=(f=n==null?void 0:n.node)==null?void 0:f.profile_picture)==null?void 0:b.uri,url:(d=n==null?void 0:n.node)==null?void 0:d.url,verified:(N=n==null?void 0:n.node)==null?void 0:N.is_verified}})}}async function O({uid:o="",cursor:r}){const a=await m({fb_api_req_friendly_name:"ProfileCometAppCollectionGridRendererPaginationQuery",variables:{count:8,cursor:r??null,id:btoa(`app_collection:${o||await E()}:2361831622:66`)},doc_id:"5244211935648733"}),t=JSON.parse(a);console.log(t);const{edges:c=[],page_info:l={}}=M(t)||{};return c.map(i=>{var s,e,u,n,_;return{id:((s=i.node.node)==null?void 0:s.id)||atob(i.node.id).split(":").at(-1),name:i.node.title.text,description:(n=(u=(e=i.node.subtitle_text)==null?void 0:e.text)==null?void 0:u.split(`
`))==null?void 0:n[1],url:i.node.url,visibility:i.node.node.visibility,image:i.node.image.uri,membersCount:Number((((_=i.node.subtitle_text.text.split(`
`))==null?void 0:_[0])||"").match(/\d+/g).join("")??1),cursor:i.cursor}})}var y=(o=>(o.NOT_JOINED="NOT_JOINED",o.PENDING="PENDING",o.MEMBER="MEMBER",o.ADMIN="ADMIN",o))(y||{});function v(o,r="MEMBER"){var a,t,c,l,i,s,e,u;return{id:(a=o==null?void 0:o.node)==null?void 0:a.id,name:(t=o==null?void 0:o.node)==null?void 0:t.name,avatar:(l=(c=o==null?void 0:o.node)==null?void 0:c.profile_picture)==null?void 0:l.uri,url:(i=o==null?void 0:o.node)==null?void 0:i.url,lastVisitedTime:(((s=o==null?void 0:o.node)==null?void 0:s.viewer_last_visited_time)||((e=o==null?void 0:o.node)==null?void 0:e.viewer_request_to_join_timestamp)||((u=o==null?void 0:o.node)==null?void 0:u.last_post_time)||0)*1e3,userType:r,cursor:o==null?void 0:o.cursor}}async function w({cursor:o="",ordering:r=["viewer_added"]}={}){var i,s,e,u;if(!o){const n=await m({fb_api_req_friendly_name:"GroupsCometJoinsRootQuery",variables:{ordering:r,scale:2},doc_id:"6985470494844388"}),_=JSON.parse(n),p=[],{pending_groups:f={},all_joined_groups:b={}}=((i=_==null?void 0:_.data)==null?void 0:i.viewer)||{};return(s=f.edges)==null||s.forEach(d=>{p.push(v(d,"PENDING"))}),(u=(e=b.tab_groups_list)==null?void 0:e.edges)==null||u.forEach(d=>{p.push(v(d,"MEMBER"))}),p}const a=await m({fb_api_req_friendly_name:"GroupsCometAllJoinedGroupsSectionPaginationQuery",variables:{cursor:o||null,ordering:r,count:20,scale:2},doc_id:"6009728632468556"}),t=JSON.parse(a);console.log(t);const{edges:c=[],page_info:l={}}=M(t)||{};return c.map(n=>v(n,"MEMBER"))}async function C({cursor:o=""}={}){var l;const r=await m({variables:{adminGroupsCount:1e3,memberGroupsCount:0,scale:1.5},doc_id:"4868264159917793"}),a=JSON.parse(r);console.log(a);const{edges:t=[],page_info:c={}}=M((l=a==null?void 0:a.data)==null?void 0:l.adminGroups)||{};return t.map(i=>v(i,"ADMIN"))}async function D(o=""){var t;const r=await m({fb_api_req_friendly_name:"useGroupLeaveMutation",variables:{input:{group_id:o,readd_policy:"ALLOW_READD",source:"comet_group_page",actor_id:await E(),client_mutation_id:"1"},groupID:o},doc_id:"2018579381571489"}),a=JSON.parse(r);return console.log(a),((t=a==null?void 0:a.data)==null?void 0:t.group_leave)!=null}export{y as U,w as a,J as b,O as c,C as g,D as l};
