import{aq as i}from"./index-DOOTCcHC.js";import{a as u,S as f,K as x}from"./MyApp-C1Cge4LI.js";import{C as y}from"./Collection-J0vJyBVX.js";import{i as h}from"./icons-CFbfSnRt.js";import{g as j,a as b}from"./stories-WJaj-oZL.js";import v from"./RecentStoryViewer-Bd-4Bhya.js";import{g as c}from"./useCacheState-Bvty8fNQ.js";import{L as w}from"./index-DBKoNkzi.js";import{I}from"./index-BhyrVf84.js";import{T as m}from"./index-Ddw3Kq44.js";import"./index-Cs-LNwoF.js";import"./file-download-Dycc4scI.js";import"./index-9LEuxGJt.js";import"./Dropdown-uE1te4Kd.js";import"./PurePanel-qusS7nQi.js";import"./index-CCWRB7N3.js";import"./TextArea-D20a544N.js";import"./addEventListener-wLIjlol3.js";import"./StoryViewers-CdXBjZSh.js";import"./index-CbAUgUyr.js";import"./responsiveObserver-CeUCIo-a.js";import"./useBreakpoint-DW8QQd81.js";import"./index-sMO--aLY.js";import"./Pagination-CV8j8exz.js";import"./row-BE6NqmDN.js";import"./styleChecker-B0mu7QsQ.js";function X({target:r}){const{ti:a}=u(),s=(r==null?void 0:r.name)+" - Stories",p=async(o=[],n)=>{if(!(r!=null&&r.id))return;const{bucketId:t,firstStoryId:e}=await j(r==null?void 0:r.id);return!t||!e?[]:await b(t)},d=(o,n)=>i.jsx(w.Item,{children:i.jsxs(f,{direction:"vertical",style:{position:"relative"},children:[i.jsx(I,{src:o.image,fallback:o.thumbnail,style:{width:160,height:270,borderRadius:10,objectFit:"cover"},preview:{destroyOnClose:!0,imageRender:()=>{var t,e;return i.jsx(v,{story:{bucket_id:(e=(t=c("Collection.data."+s))==null?void 0:t[0])==null?void 0:e.bucket_id,owner:r},bucketsData:c("Collection.data."+s)||[],index:n})},toolbarRender:()=>null}}),i.jsxs(m.Text,{children:[x(o.creation_time*1e3,a)," ",a({vi:"trước",en:"ago"}),i.jsx("br",{}),o.react_count," reactions ",o.reaction]}),o.caption&&i.jsx(m.Text,{children:o.caption}),o.video&&i.jsx("div",{style:{position:"absolute",top:10,right:10,pointerEvents:"none"},children:h.IGVideo})]})}),l=async(o,n)=>({name:o.id+(o.video?".mp4":".jpg"),url:o.video||o.image});return i.jsx(y,{collectionName:s,fetchNext:p,renderItem:d,downloadItem:l,rowKey:o=>o.id,once:!0})}export{X as default};
