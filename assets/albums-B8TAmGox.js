import{C as x,D as k,G as C}from"./MyApp-CDv-rFzA.js";async function E({uid:s="",cursor:p=""}){var l,n,c,d,u,b,f,_,h,y;const e=[],m=await x({fb_api_req_friendly_name:"ProfileCometAppCollectionAlbumsRendererPaginationQuery",variables:{cursor:p,count:8,scale:2,id:btoa(`app_collection:${s}:2305272732:6`)},doc_id:"8672545689426653"}),r=k(m),{edges:o=[],page_info:i={}}=((n=(l=r==null?void 0:r.data)==null?void 0:l.node)==null?void 0:n.pageItems)||{};for(const t of o){const v=atob((c=t==null?void 0:t.node)==null?void 0:c.id).split(":").pop()||"";e.push({id:v,type:"album",name:(u=(d=t==null?void 0:t.node)==null?void 0:d.title)==null?void 0:u.text,count:parseInt((f=(b=t==null?void 0:t.node)==null?void 0:b.subtitle_text)==null?void 0:f.text)||0,link:(_=t==null?void 0:t.node)==null?void 0:_.url,picture:(y=(h=t==null?void 0:t.node)==null?void 0:h.image)==null?void 0:y.uri,cursor:t==null?void 0:t.cursor,recent:e.length})}return{albums:e,nextCursor:i==null?void 0:i.end_cursor}}async function P({groupId:s="",cursor:p=""}){var l,n,c,d,u,b,f,_,h,y,t,v,A,$;const e=[],m=await x({fb_api_req_friendly_name:"GroupsCometMediaAlbumsTabGridQuery",variables:{cursor:p,count:8,scale:2,id:s},doc_id:"6894403247286675"}),r=k(m),{edges:o=[],page_info:i={}}=((n=(l=r==null?void 0:r.data)==null?void 0:l.node)==null?void 0:n.group_albums)||{};for(const a of o){const G=(c=a==null?void 0:a.node)==null?void 0:c.id;e.push({id:G,type:"album",name:(u=(d=a==null?void 0:a.node)==null?void 0:d.title)==null?void 0:u.text,count:(((f=(b=a==null?void 0:a.node)==null?void 0:b.photos)==null?void 0:f.count)||0)+(((h=(_=a==null?void 0:a.node)==null?void 0:_.video)==null?void 0:h.count)||0),link:(y=a==null?void 0:a.node)==null?void 0:y.url,picture:($=(A=(v=(t=a==null?void 0:a.node)==null?void 0:t.album_cover_focused_image)==null?void 0:v.image)==null?void 0:A.image)==null?void 0:$.uri,cursor:a==null?void 0:a.cursor,recent:e.length})}return{albums:e,nextCursor:i==null?void 0:i.end_cursor}}async function Q({id:s="",fromId:p="",accessToken:e=""}){var i,l,n,c,d;const m=[],r=await C(`https://graph.facebook.com/v14.0/${s}?fields=albums.limit(100)${p?`.after(${btoa(p)})`:""}{type,name,count,link,picture{url}}&access_token=${e}`),o=k(r);if((l=(i=o.albums)==null?void 0:i.data)!=null&&l.length)for(const u of o.albums.data)m.push({id:u.id,type:u.type,name:u.name,count:u.count,link:u.link,picture:u.picture.data.url,recent:m.length});return{albums:m,nextCursor:(d=(c=(n=o.albums)==null?void 0:n.paging)==null?void 0:c.cursors)==null?void 0:d.after}}var w=(s=>(s.IMAGE="image",s.VIDEO="video",s))(w||{});async function q({albumId:s,accessToken:p="",fromId:e=""}){var i,l;let m=`https://graph.facebook.com/v14.0/${s}/photos?fields=largest_image&limit=100&access_token=${p}`;e&&(m+=`&after=${btoa(e)}`);let r=await C(m),o=k(r);if((i=o==null?void 0:o.data)!=null&&i.length)return((l=o==null?void 0:o.data)==null?void 0:l.map(n=>({id:n.id,uri:n.largest_image.source,type:"image"})))||[];r=await x({doc_id:"8142948395762884",variables:{id:s,cursor:e?btoa("fbid:"+e):"",count:14,renderLocation:"permalink",scale:2}}),o=k(r);try{return o.data.node.media.edges.map(c=>({id:c.node.id,uri:c.node.image.uri,type:c.node.__typename==="Video"?"video":"image"}))}catch(n){return console.error(n),[]}}export{w as M,P as a,E as b,q as c,Q as g};
