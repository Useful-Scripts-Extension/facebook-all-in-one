import{r as F,av as o,aw as I}from"./index-DYL9mGRk.js";import{u as T,d as f,t as u,$ as D,b as E,T as v,B as C,a0 as m,a1 as x,a2 as j,a3 as y,S as B}from"./MyApp-CY91n_UU.js";import{R as q}from"./row-CxkJK_hv.js";import{T as k}from"./index-CQ3mEa-C.js";import{A as N}from"./index-CgJ96nV-.js";import{L as S}from"./index-C7kSB3_N.js";import{C as P}from"./index-CLojzUjG.js";import{D as h}from"./index-BAnf6eLO.js";import"./responsiveObserver-BnIQ_d1A.js";import"./Pagination-Bg_a53Jb.js";import"./useBreakpoint-C8WlvIiC.js";import"./index-CPiUW4dB.js";import"./PurePanel-D2NXTZJr.js";import"./SearchOutlined-kCsLe9-_.js";const p={Facebook:{params:["fbclid","mc_eid"]},Instagram:{params:["igshid"]},Tiktok:{params:["ttclid"]},Twitter:{domains:["twitter.com"],params:["s","t"]},Google:{domains:["google.com"],params:["gclid","glsrc","_ga","sxsrf","source","ei","iflsig","gs_lp","gs_lcrp","sclient","ved","uact","stick","sca_esv"]},Spotify:{domains:["spotify.com","youtube.com","reddit.com"],params:["si","context"]},Youtube:{domains:["youtube.com"],params:["feature","ab_channel","pp","bp","redir_token","event","embeds_referring_euri","source_ve_path"]},Amazon:{domains:["amazon.*"],params:["ref","tag","linkCode","hv(adid|netw|qmt|bmt|dev|locint|locphy|targid)","psc","content-id","pd_rd_(w|p|r|i|wg)"]},Bing:{domains:["bing.com"],params:["toWww","redig","form","qs","sp","ghc","lq","pq","sc","sk","cvid","ghsh","ghacc","ghpl","ccid","id","thid","simid","FORM","ck","ajaxhist","ajaxserp","osid"]},LinkedIn:{domains:["linkedin.com"],params:["trackingId","lipi","midSig","trkEmail","otpToken","refId","midToken","trk","eid","mcid","ePP","ccuid","cid"]},Reddit:{params:["share_id"]},Adobe:{params:["ef_id","s_kwcid"]},Microsoft:{params:["msclkid"]},Pinterest:{params:["epik"]}},w=[{id:"fb_blockSeenStory",icon:"üëÄ",name:{vi:'Ch·∫∑n "ƒë√£ xem" tr√™n story Facebook',en:'Block the "seen" feature in Facebook Stories'},desc:{vi:"Xem story kh√¥ng b·ªã ƒë·ªëi ph∆∞∆°ng ph√°t hi·ªán ngay tr√™n Facebook",en:"View stories anonymously right on Facebook"},contentScript:{id:"fb_blockSeenStory",js:["./scripts/content/fb_blockSeenStory.js"],matches:["https://*.facebook.com/*"],runAt:"document_start",world:"MAIN",allFrames:!0}},{id:"insta_blockSeenStory",icon:"üëÄ",name:{vi:'Ch·∫∑n "ƒë√£ xem" tr√™n story Instagram',en:'Block the "seen" feature in Instagram Stories'},desc:{vi:"Xem story kh√¥ng b·ªã ƒë·ªëi ph∆∞∆°ng ph√°t hi·ªán ngay tr√™n Instagram",en:"View stories anonymously right on Instagram"},contentScript:{id:"insta_blockSeenStory",js:["./scripts/content/insta_blockSeenStory.js"],matches:["https://*.instagram.com/*"],runAt:"document_start",world:"MAIN",allFrames:!0}},{id:"fb_showTotalPostReactions",icon:"‚ù§Ô∏è",name:{vi:"ƒê·∫øm t·ªïng l∆∞·ª£t th√≠ch b√†i vi·∫øt tr√™n Facebook",en:"Count total post reactions on Facebook"},desc:{vi:"√Åp d·ª•ng cho nh·ªØng b√†i vi·∫øt b·ªã ·∫©n l∆∞·ª£t th√≠ch",en:"Applies to posts that hide reactions"},contentScript:{id:"fb_showTotalPostReactions",js:["./scripts/content/fb_showTotalPostReactions.js"],matches:["https://*.facebook.com/*"],runAt:"document_start",world:"MAIN",allFrames:!0}},{id:"fb_addDownloadVideoBtn",icon:"üé¨",name:{vi:"Th√™m n√∫t t·∫£i cho m·ªçi video/reel/comment tr√™n Facebook",en:"Show download button on every video/reel/comment on Facebook"},contentScript:{id:"fb_addDownloadVideoBtn",js:["./scripts/content/fb_addDownloadVideoBtn.js"],matches:["https://*.facebook.com/*"],runAt:"document_start",world:"MAIN",allFrames:!1}},{id:"fb_removeFbclid",icon:"üîó",name:{vi:"Xo√° tham s·ªë theo d√µi tr√™n m·ªçi url (fbclid, ttclid, ...)",en:"Delete tracking param from all urls (fbclid, ttclid, ...)"},desc:{vi:"T·ª± ƒë·ªông xo√° c√°c tham s·ªë theo d√µi tr√™n m·ªçi url ("+Object.keys(p).join(", ")+")",en:"Auto remove all tracking params from all urls ("+Object.keys(p).join(", ")+")"},onEnable:async()=>{function n(t){const d=/\((.*?)\)/,a=t.match(d);if(a){const e=a[1].split("|"),c=t.split("(")[0];return e.map(l=>c+l.trim())}else return[t]}const r=1e3;let i=0,s=[];for(let t in p){let d=r+i;i++;let{domains:a=[],params:e}=p[t];a=(a==null?void 0:a.filter(Boolean))||[],s.push({id:d,priority:1,action:{type:"redirect",redirect:{transform:{queryTransform:{removeParams:e.map(c=>n(c)).flat()}}}},condition:{isUrlFilterCaseSensitive:!0,regexFilter:`[?&](${e.join("|")})=`,resourceTypes:["main_frame","sub_frame"],...a.length>0?{requestDomains:a}:{}}})}console.log(s),await m("chrome.declarativeNetRequest.updateDynamicRules",[{addRules:s,removeRuleIds:s.map(t=>t.id)}]),x("remove_tracking_in_url",s.map(t=>t.id)),console.log("added",s)},onDisable:async()=>{const n=await j("remove_tracking_in_url");console.log("deleted",n),m("chrome.declarativeNetRequest.updateDynamicRules",[{removeRuleIds:n}])},supported:!0,button:o.jsx(v,{title:y({vi:"Danh s√°ch tham s·ªë",en:"Tracking params list"}),children:o.jsx(I,{type:"default",icon:o.jsx("i",{className:"fa-solid fa-question"}),onClick:()=>{B.fire({icon:"info",title:y({vi:"Danh s√°ch tham s·ªë",en:"Tracking params list"}),html:'<textarea rows="20" style="width: 100%" readonly>'+JSON.stringify(p,null,2)+"</textarea>"})}})})}],_="AutoRun.OtherScriptEnabled";async function R(n=!1){const i=(await m("chrome.scripting.getRegisteredContentScripts")||[]).map(t=>t.id);if(n)return i;const s=await j(_)||[];return[...i,...s]}async function V(n){const r=n.map(t=>t.contentScript).filter(Boolean),i=await R(!0);await m("chrome.scripting.unregisterContentScripts",[{ids:i}]),r.length&&await m("chrome.scripting.registerContentScripts",[r]);const s=n.filter(t=>!t.contentScript).map(t=>t.id);s.length&&await x(_,s)}function Z(){const{ti:n}=T(),[r,i]=f("AutoRun.supported",new Set),[s,t]=f("AutoRun.enabled",new Set),d=w.map(e=>({...e,enabled:s.has(e==null?void 0:e.id),supported:e.supported??r.has(e==null?void 0:e.id)})),a=e=>{var g,b;const c=s.has(e.id),l=new Set(s);c?(u("AutoRun.Disable."+e.id),l.delete(e.id),(g=e.onDisable)==null||g.call(e)):(u("AutoRun.Enable."+e.id),l.add(e.id),(b=e.onEnable)==null||b.call(e)),t(l),V(w.filter(A=>l.has(A.id)))};return F.useEffect(()=>{u("AutoRun:onLoad"),D().then((e=[])=>{i(new Set(e))}),R().then((e=[])=>{console.log(e),t(new Set(e))})},[]),o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},children:[o.jsx(q,{align:"middle",style:{margin:"16px"},children:o.jsx(k.Title,{level:3,style:{margin:0},children:n({en:"AutoRun Features",vi:"T·ª± ƒë·ªông ch·∫°y"})})}),o.jsx(E,{align:"start",children:o.jsx(N,{showIcon:!0,type:"success",message:n({en:"These features will be automatically run when you open facebook/instagram.",vi:"C√°c ch·ª©c nƒÉng d∆∞·ªõi ƒë√¢y s·∫Ω ƒë∆∞·ª£c t·ª± ƒë·ªông ch·∫°y khi b·∫°n m·ªü facebook/instagram"})})}),o.jsx(S,{style:{padding:10},dataSource:d,renderItem:e=>o.jsx(S.Item,{children:o.jsxs(P,{disabled:!e.supported,checked:e.enabled,onChange:c=>{a(e)},children:[o.jsxs(v,{title:n(e.desc),children:[o.jsxs(k.Text,{style:{opacity:e.supported?1:.6},children:[o.jsx(h,{type:"vertical"}),e.icon,o.jsx(h,{type:"vertical"}),n(e.name)]}),!e.supported&&o.jsx(C,{count:n({en:"Coming soon",vi:"S·∫Øp c√≥"}),style:{color:"white",marginLeft:10},color:"geekblue"})]}),e.button?o.jsxs(o.Fragment,{children:[o.jsx(h,{type:"vertical"}),e.button]}):null]})})})]})}export{Z as default};
