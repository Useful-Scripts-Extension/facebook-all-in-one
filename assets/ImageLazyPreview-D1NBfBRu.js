import{al as L,r as f,aq as h}from"./index-1mnbKtVE.js";import{a as k,n as x,r as C}from"./MyApp-DvK0rWAv.js";import{I}from"./index-DpV3wnji.js";import"./addEventListener-Clq_SX9W.js";function z(m){const{cacheId:p,getPreview:u,renderPreview:r,...a}=m,{message:o}=L.useApp(),{ti:s}=k(),c=a.src||"",n="ImageLazyPreview."+(p||c),[y,i]=f.useState(!1),[l,d]=f.useState(x(n,"")),v=async()=>{if(!l)try{i(!0),o.loading({duration:0,key:n,content:s({en:"Loading...",vi:"Đang tải..."})});let t=performance.now();const e=await u();let w=performance.now();console.log("getPreview",w-t),e&&e!==c&&(d(e),C(n,e)),o.success({key:n,content:s({en:"Load success",vi:"Tải xong"})})}catch(t){console.error(t),o.error({key:n,content:s({en:"Load failed: ",vi:"Tải lỗi: "})+t.message})}finally{i(!1)}},g=l||c;return h.jsx(I,{...a,preview:typeof r=="function"?r(g,y):{src:g},onClick:t=>{var e;(e=a.onClick)==null||e.call(a,t),v()}})}export{z as default};
