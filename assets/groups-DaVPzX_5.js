import{A as d,M,C as N}from"./MyApp-BA9o3E6N.js";async function J(o=""){var c,l,r,s,u,e;const i=await d({fb_api_req_friendly_name:"CometGroupMembersAdminsRootQuery",variables:{groupID:o,scale:2},doc_id:"8138328892873449"}),a=JSON.parse(i);console.log(a);const t=((c=a==null?void 0:a.data)==null?void 0:c.group)||{};return{groupId:o||"",adminCount:((l=t==null?void 0:t.admin_and_moderator_profiles)==null?void 0:l.count)||0,memberCount:((r=t==null?void 0:t.all_active_members)==null?void 0:r.count)||((s=t==null?void 0:t.group_member_profiles)==null?void 0:s.count)||0,adminProfiles:(e=(u=t==null?void 0:t.group_admin_profiles)==null?void 0:u.edges)==null?void 0:e.map(n=>{var _,p,f,b,m,v;return{uid:(_=n==null?void 0:n.node)==null?void 0:_.id,name:(p=n==null?void 0:n.node)==null?void 0:p.name,avatar:(b=(f=n==null?void 0:n.node)==null?void 0:f.profile_picture)==null?void 0:b.uri,url:(m=n==null?void 0:n.node)==null?void 0:m.url,verified:(v=n==null?void 0:n.node)==null?void 0:v.is_verified}})}}async function w({uid:o="",cursor:i}){const a=await d({fb_api_req_friendly_name:"ProfileCometAppCollectionGridRendererPaginationQuery",variables:{count:8,cursor:i??null,id:btoa(`app_collection:${o||await M()}:2361831622:66`)},doc_id:"5244211935648733"}),t=JSON.parse(a);console.log(t);const{edges:c=[],page_info:l={}}=N(t);return c.map(r=>{var s,u,e,n,_;return{id:((s=r.node.node)==null?void 0:s.id)||atob(r.node.id).split(":").at(-1),name:r.node.title.text,description:(n=(e=(u=r.node.subtitle_text)==null?void 0:u.text)==null?void 0:e.split(`
`))==null?void 0:n[1],url:r.node.url,visibility:r.node.node.visibility,image:r.node.image.uri,membersCount:Number((((_=r.node.subtitle_text.text.split(`
`))==null?void 0:_[0])||"").match(/\d+/g).join("")??1),cursor:r.cursor}})}var O=(o=>(o.NONE="NONE",o.TOP_LEVEL_GROUP="TOP_LEVEL_GROUP",o))(O||{}),y=(o=>(o.NOT_JOINED="NOT_JOINED",o.PENDING="PENDING",o.MEMBER="MEMBER",o.ADMIN="ADMIN",o))(y||{});function E(o,i="MEMBER"){var a,t,c,l,r,s,u,e,n;return{id:(a=o==null?void 0:o.node)==null?void 0:a.id,name:(t=o==null?void 0:o.node)==null?void 0:t.name,avatar:(l=(c=o==null?void 0:o.node)==null?void 0:c.profile_picture)==null?void 0:l.uri,url:(r=o==null?void 0:o.node)==null?void 0:r.url,lastVisitedTime:(((s=o==null?void 0:o.node)==null?void 0:s.viewer_last_visited_time)||((u=o==null?void 0:o.node)==null?void 0:u.viewer_request_to_join_timestamp)||((e=o==null?void 0:o.node)==null?void 0:e.last_post_time)||0)*1e3,userType:i,cursor:o==null?void 0:o.cursor,subspaceType:((n=o==null?void 0:o.node)==null?void 0:n.subspace_type)||"NONE"}}async function C({cursor:o="",ordering:i=["viewer_added"]}={}){var r,s,u,e;if(!o){const n=await d({fb_api_req_friendly_name:"GroupsCometJoinsRootQuery",variables:{ordering:i,scale:2},doc_id:"6985470494844388"}),_=JSON.parse(n),p=[],{pending_groups:f={},all_joined_groups:b={}}=((r=_==null?void 0:_.data)==null?void 0:r.viewer)||{};return(s=f.edges)==null||s.forEach(m=>{p.push(E(m,"PENDING"))}),(e=(u=b.tab_groups_list)==null?void 0:u.edges)==null||e.forEach(m=>{p.push(E(m,"MEMBER"))}),console.log(_),p}const a=await d({fb_api_req_friendly_name:"GroupsCometAllJoinedGroupsSectionPaginationQuery",variables:{cursor:o||null,ordering:i,count:20,scale:2},doc_id:"6009728632468556"}),t=JSON.parse(a);console.log(t);const{edges:c=[],page_info:l={}}=N(t);return c.map(n=>E(n,"MEMBER"))}async function D({cursor:o=""}={}){var l;const i=await d({variables:{adminGroupsCount:1e3,memberGroupsCount:0,scale:1.5},doc_id:"4868264159917793"}),a=JSON.parse(i);console.log(a);const{edges:t=[],page_info:c={}}=N((l=a==null?void 0:a.data)==null?void 0:l.adminGroups);return t.map(r=>E(r,"ADMIN"))}async function P(o=""){var t;const i=await d({fb_api_req_friendly_name:"useGroupLeaveMutation",variables:{input:{group_id:o,readd_policy:"ALLOW_READD",source:"comet_group_page",actor_id:await M(),client_mutation_id:"1"},groupID:o},doc_id:"2018579381571489"}),a=JSON.parse(i);return console.log(a),((t=a==null?void 0:a.data)==null?void 0:t.group_leave)!=null}export{O as S,y as U,C as a,J as b,w as c,D as g,P as l};
